s390/pci_mmio: use follow_pfnmap API

jira LE-3557
Rebuild_History Non-Buildable kernel-5.14.0-570.26.1.el9_6
commit-author Peter Xu <peterx@redhat.com>
commit bd8c2d18bf5cccd8842d00b17d6f222beb98b1b3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-5.14.0-570.26.1.el9_6/bd8c2d18.failed

Use the new API that can understand huge pfn mappings.

Link: https://lkml.kernel.org/r/20240826204353.2228736-12-peterx@redhat.com
	Signed-off-by: Peter Xu <peterx@redhat.com>
	Cc: Niklas Schnelle <schnelle@linux.ibm.com>
	Cc: Gerald Schaefer <gerald.schaefer@linux.ibm.com>
	Cc: Heiko Carstens <hca@linux.ibm.com>
	Cc: Vasily Gorbik <gor@linux.ibm.com>
	Cc: Alexander Gordeev <agordeev@linux.ibm.com>
	Cc: Christian Borntraeger <borntraeger@linux.ibm.com>
	Cc: Sven Schnelle <svens@linux.ibm.com>
	Cc: Alex Williamson <alex.williamson@redhat.com>
	Cc: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
	Cc: Borislav Petkov <bp@alien8.de>
	Cc: Catalin Marinas <catalin.marinas@arm.com>
	Cc: Dave Hansen <dave.hansen@linux.intel.com>
	Cc: David Hildenbrand <david@redhat.com>
	Cc: Gavin Shan <gshan@redhat.com>
	Cc: Ingo Molnar <mingo@redhat.com>
	Cc: Jason Gunthorpe <jgg@nvidia.com>
	Cc: Matthew Wilcox <willy@infradead.org>
	Cc: Paolo Bonzini <pbonzini@redhat.com>
	Cc: Ryan Roberts <ryan.roberts@arm.com>
	Cc: Sean Christopherson <seanjc@google.com>
	Cc: Thomas Gleixner <tglx@linutronix.de>
	Cc: Will Deacon <will@kernel.org>
	Cc: Zi Yan <ziy@nvidia.com>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
(cherry picked from commit bd8c2d18bf5cccd8842d00b17d6f222beb98b1b3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/pci/pci_mmio.c
diff --cc arch/s390/pci/pci_mmio.c
index 588089332931,de5c0b389a3e..000000000000
--- a/arch/s390/pci/pci_mmio.c
+++ b/arch/s390/pci/pci_mmio.c
@@@ -169,7 -168,9 +168,13 @@@ SYSCALL_DEFINE3(s390_pci_mmio_write, un
  	if (!(vma->vm_flags & VM_WRITE))
  		goto out_unlock_mmap;
  
++<<<<<<< HEAD
 +	ret = follow_pte(vma->vm_mm, mmio_addr, &ptep, &ptl);
++=======
+ 	args.address = mmio_addr;
+ 	args.vma = vma;
+ 	ret = follow_pfnmap_start(&args);
++>>>>>>> bd8c2d18bf5c (s390/pci_mmio: use follow_pfnmap API)
  	if (ret)
  		goto out_unlock_mmap;
  
@@@ -308,7 -308,9 +312,13 @@@ SYSCALL_DEFINE3(s390_pci_mmio_read, uns
  	if (!(vma->vm_flags & VM_WRITE))
  		goto out_unlock_mmap;
  
++<<<<<<< HEAD
 +	ret = follow_pte(vma->vm_mm, mmio_addr, &ptep, &ptl);
++=======
+ 	args.vma = vma;
+ 	args.address = mmio_addr;
+ 	ret = follow_pfnmap_start(&args);
++>>>>>>> bd8c2d18bf5c (s390/pci_mmio: use follow_pfnmap API)
  	if (ret)
  		goto out_unlock_mmap;
  
* Unmerged path arch/s390/pci/pci_mmio.c
